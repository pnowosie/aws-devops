# Moduł 12

## Szacowanie kosztów

### Przyjęte założenia

Zaprezentuję tu podejście nastawione na obniżenie kosztów. Koszty zasobów, którę będę pokrywał z własnej kieszeni, z założenia będą używane w niewielkim zakresie, na użytek rodziny i znajomych. Następną korzyścią byłoby określenie kosztów, po okresie 1-szego roku, kiedy bonusy na start przestaną obowiązywać.

**Hint:** Poznając CloudFormation w tym kursie, biorę również pod uwagę możliwość zakładania co roku nowego konta i automatycznego tworzenia zasobów :)

### Parametry zużycia

**Obserwacja**
Biorąc pod uwagę fazy księżyca, ilość dni słonecznych do deszczowych i układ fusów w dzisiejszej herbacie,
szacuję, że usługa memes-generator przyniosła by maksymalny ruch na poziomie 3 000 odsłon miesięcznie.
<br/>(Nie uwzględniono lock-down-ów)

### Określenie zasobów
Zaglądając do usługi `Respources Group & Tag Editor / Tag Editor` ustawiając region i Tag projektu mam wgląd w zasoby używane przez aplikację.

### Szacowanie kosztów
Pracowicie przeklepuję zasoby do `AWS Pricing Calculator` w przypadku wątpliwości dolewam kranówki :potable_water: do wypitej już herbaty :mate: i fusy ponownie pomagają wyszacować co trzeba. Pomaga również (jeśli bezchmurne niebo) patrzenie na :sun_with_face: słońce, pojawia się łzawienie :sob: i liczby :one::zero::two: (jeśli się porządnie skupić).
<br/>(Nie kontaktowałem się z wróżką :supervillain: ani detektywem R. :detective: Nie używałem substancji psychoaktywnych:mushroom: - choć możecie w to wątpić)

**Luźne uwagi**
- Koszt CloudFront jest zaniedbywalny.
- Ile mamy parametrów? I tak wydaje się nic nie kosztować
```bash
aws ssm describe-parameters  --region eu-west-1 --query="Parameters[].Name" --output yaml | ag ndev | wc -l
```

### Podsumowanie
- Infrastructura w jednym AZ (backup & restore): ~ **$120 / mc ($1440 / rok)**
- Light Pilot (bez instancji, NAT Gateways, replikacja RDS): ~ **130 + 70 = $200 / mc ($2400)**
- Multi-AZ (2 instancje RDS + 2 x to co backup-restore): ~ **$240 / mc ($2900)** 

<img width="1294" alt="obraz" src="https://user-images.githubusercontent.com/1813036/128595089-ffaeb9ec-82bd-414b-9a4e-c675364a5dcd.png">

### Wnioski
To nie ma sensu zwłaszcze VPC / RDS. Pomyślę o serverless z danymi w S3 :) Secrety są równie bezpieczne w SSM niż Secret Manager a od rotowania baza może dostać zawrotów głowy ;)



